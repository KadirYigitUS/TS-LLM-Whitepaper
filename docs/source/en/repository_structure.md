---
title: Repository Structure & Build Pipeline
---

# Repository Structure

The TS-LLM Knowledge Stack keeps research data, automation scripts, and publication assets in a single Git repository. This page documents the directories relevant to both GitHub Pages and Read the Docs.

## 1. Top-Level Layout
```text
.
├── data/                       # Downloaded reference metadata + widgets
├── docs/                       # Sphinx project consumed by RTD
│   ├── data/                   # Published interactive assets (copied via html_extra_path)
│   ├── previews/               # Screenshot exports (ignored by Sphinx)
│   ├── requirements.txt        # RTD build requirements
│   └── source/                 # MyST content + configuration
├── Obsidian_Project/           # Canonical research vault (cleaned before publishing)
├── script/                     # Automation utilities (apidoc’ed)
├── tables/                     # CSV trackers referenced by scripts
└── white_paper.*               # Rendered manuscript outputs
```

## 2. Sphinx Source Tree
- `_static/` — shared assets (`logo.png`, `js/mermaid-init.js`, CSS overrides if needed).
- `_templates/` — reserved for future Jinja templates.
- `en/` — direct exports of the English Obsidian notes.
- `tr/` — curated Turkish adaptations.
- `api_reference/` — autogenerated API docs for `/script/` modules.
- `mermaid_demo.md` — regression test for diagram rendering.
- `index.md` — language tabs + RTD localization checklist.

## 3. Automation Scripts (`/script/`)
| Script | Purpose |
| --- | --- |
| `collect_references.py` | Normalizes metadata from CSV/TSV inputs. |
| `download_references.py` | Fetches PDFs/HTML via DOI fallbacks. |
| `white_paper_builder.py` | Merges cleaned notes into `white_paper.md`/`.html`. |
| `obsidian_cleanup.py` | Strips Obsidian-specific syntax for Sphinx consumption. |
| `connected_papers.py` | Calls the Connected Papers API and caches graph data. |
| `build_semantic_widgets.py` | Packages Semantic Scholar + Connected Papers widgets for embedding. |

Regenerate the API docs after editing scripts via `make -C docs api`.

## 4. Build + Deployment Flow
1. **Writers** update Obsidian notes under `Obsidian_Project/`.
2. Run `python script/obsidian_cleanup.py` to sync cleaned copies into `docs/source/en/`.
3. Translate or summarize key sections for `docs/source/tr/`.
4. Use `make -C docs html` locally to verify Mermaid, iframe embeds, and autodoc output.
5. Commit all changes (including generated `api_reference/*.md`) and push to GitHub.
6. Read the Docs builds English and Turkish versions automatically once the translation projects are linked.

## 5. Asset Sizing & Hosting
- Keep binary assets under 10&nbsp;MB so RTD accepts them; larger widgets remain on GitHub Pages and are embedded via absolute URLs.
- Record every automation command in `/script/` docstrings for reproducibility (per the AGENT quality mandate).

```{important}
Always test the iframe widget locally with `python -m http.server` from `docs/_build/html` to confirm CSP compatibility before pushing to RTD.
```
